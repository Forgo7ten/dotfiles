# Core: Environment Variables
# This file allows chezmoi templates.

### Android SDK start

{{- if eq .chezmoi.os "darwin" }}
export ANDROID_HOME="$HOME/Library/Android/sdk"
{{- else }}
export ANDROID_HOME="$HOME/Android/Sdk"
{{- end }}
## 配置sdk及ndk

# 声明 path 是一个唯一数组 (自动去重)
typeset -U path

# 定义需要添加的 Android 相关路径数组
local android_paths=(
    "$ANDROID_HOME/tools"
    "$ANDROID_HOME/tools/bin"
    "$ANDROID_HOME/platform-tools"
)

{{- if and (hasKey . "tools") (hasKey .tools "andorid_sdk_ndk_version") }}
android_paths+=("$ANDROID_HOME/ndk/{{ .tools.andorid_sdk_ndk_version }}")
{{- end }}

{{- if and (hasKey . "tools") (hasKey .tools "android_sdk_buildtools_version") }}
android_paths+=("$ANDROID_HOME/build-tools/{{ .tools.android_sdk_buildtools_version }}")
{{- end }}

# 批量将存在的路径加入 path 数组的前面
for p in "${android_paths[@]}"; do
    if [[ -d "$p" ]]; then
        path=("$p" $path)
    fi
done

### Android SDK end
