{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash

# ä½œç”¨ï¼šå½“å­—ä½“æ–‡ä»¶å˜åŠ¨æ—¶è‡ªåŠ¨åˆ·æ–° Linux å­—ä½“ç¼“å­˜
# è§¦å‘æœºåˆ¶ï¼šç›‘æ§ ~/.local/share/fonts åŠå…¶å­ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å˜åŒ–
# å˜åŒ–æŒ‡çº¹ï¼š{{ output "ls" "-lR" (joinPath .chezmoi.homeDir ".local/share/fonts") | sha256sum }}

set -e # å‡ºé”™æ—¶ç«‹å³é€€å‡º

# ç¡®ä¿ç›®å½•å­˜åœ¨ï¼ˆé˜²æ­¢ ls å‘½ä»¤åœ¨åˆå§‹å®‰è£…æ—¶å› æ‰¾ä¸åˆ°ç›®å½•è€ŒæŠ¥é”™ï¼‰
FONT_DIR="{{ joinPath .chezmoi.homeDir ".local/share/fonts" }}"
if [ -d "$FONT_DIR" ]; then
    echo "ğŸš€ Detecting font changes in $FONT_DIR..."
    echo "ğŸ”„ Running fc-cache to update system fonts..."
    fc-cache -fv
    echo "âœ… Font cache updated successfully."
else
    echo "âš ï¸ Font directory $FONT_DIR does not exist. Skipping."
fi

{{ end -}}